{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nexport var OrbitControls = /*#__PURE__*/function () {\n  function OrbitControls(camera, element) {\n    var _this = this;\n\n    _classCallCheck(this, OrbitControls);\n\n    this.camera = void 0;\n    this.element = void 0;\n    this.dollyStep = void 0;\n    this.dollyCurr = void 0;\n    this.dragging = false;\n    this.distance = null;\n    this.x = 0;\n    this.y = 0;\n    this.lastX = 0;\n    this.lastY = 0;\n    this.rotationSpeed = 1000;\n\n    this.onMouseUp = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      _this.dragging = false;\n      _this.distance = null;\n    };\n\n    this.onTouchEnd = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n      _this.dragging = false;\n      _this.distance = null;\n    };\n\n    this.onMouseDown = function (e) {\n      _this.dragging = true;\n      e.stopPropagation();\n      e.preventDefault();\n      _this.x = e.pageX;\n      _this.y = e.pageY;\n    };\n\n    this.onTouchStart = function (e) {\n      var _e$touches = _slicedToArray(e.touches, 2),\n          t1 = _e$touches[0],\n          t2 = _e$touches[1];\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (t2) {\n        var a = t1.pageX - t2.pageX;\n        var b = t1.pageY - t2.pageY;\n        _this.distance = Math.sqrt(a * a + b * b);\n      } else {\n        _this.x = t1.pageX;\n        _this.y = t1.pageY;\n        _this.dragging = true;\n      }\n    };\n\n    this.onMouseMove = function (e) {\n      _this.lastX = _this.x;\n      _this.lastY = _this.y;\n      e.stopPropagation();\n      e.preventDefault();\n      _this.x = e.pageX;\n      _this.y = e.pageY;\n      if (!_this.dragging) return;\n      var dx = _this.lastX - _this.x;\n      var dy = _this.lastY - _this.y;\n\n      _this.rotate(dx, dy);\n    };\n\n    this.onTouchMove = function (e) {\n      var _e$touches2 = _slicedToArray(e.touches, 2),\n          t1 = _e$touches2[0],\n          t2 = _e$touches2[1];\n\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (t2) {\n        if (!_this.distance) {\n          return;\n        }\n\n        var a = t1.pageX - t2.pageX;\n        var b = t1.pageY - t2.pageY;\n        var nextDistance = Math.sqrt(a * a + b * b);\n\n        if (_this.distance > nextDistance) {\n          _this.dollyCurr -= _this.dollyStep;\n        } else {\n          _this.dollyCurr += _this.dollyStep;\n        }\n\n        _this.camera.dolly(_this.dollyCurr);\n\n        _this.distance = nextDistance;\n      } else if (_this.dragging) {\n        _this.lastX = _this.x;\n        _this.lastY = _this.y;\n        _this.x = t1.pageX;\n        _this.y = t1.pageY;\n        var dx = _this.lastX - _this.x;\n        var dy = _this.lastY - _this.y;\n\n        _this.rotate(dx, dy);\n      }\n    };\n\n    this.onMouseWheel = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      _this.dolly(e.deltaY);\n    };\n\n    this.camera = camera;\n    this.element = element;\n    this.dollyStep = Math.max(this.camera.position[0], this.camera.position[1], this.camera.position[2]) / 100;\n    this.dollyCurr = 0;\n  }\n\n  _createClass(OrbitControls, [{\n    key: \"dolly\",\n    value: function dolly(value) {\n      if (value < 0) {\n        this.dollyCurr += this.dollyStep;\n      } else {\n        this.dollyCurr -= this.dollyStep;\n      }\n\n      this.camera.dolly(this.dollyCurr);\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(dx, dy) {\n      var _this$element = this.element,\n          width = _this$element.width,\n          height = _this$element.height;\n      var incX = dx / width * this.rotationSpeed;\n      var incY = dy / height * this.rotationSpeed;\n      dx && this.camera.incRotationY(incX);\n      dy && this.camera.incRotationX(incY);\n    }\n  }]);\n\n  return OrbitControls;\n}();","map":null,"metadata":{},"sourceType":"module"}